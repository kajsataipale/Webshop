using System.Collections.Generic; using System.Data.SqlClient; using System.Linq; using Dapper; using Microsoft.AspNetCore.Mvc; using Microsoft.Extensions.Configuration; using MySql.Data.MySqlClient;
using Webshop.Models;   namespace Webshop.Controllers {     public class ProductController : Controller     {         private readonly string connectionString;          public ProductController(IConfiguration configuration)         {             this.connectionString = configuration.GetConnectionString("ConnectionString");         }          public ActionResult Index()         {             List<ProductViewModel> product;             using (var connection = new MySqlConnection(this.connectionString))             {                 product = connection.Query<ProductViewModel>("select * from Products").ToList();             }              return View(product);         }          [HttpPost]         public ActionResult Index(ProductViewModel model)         {             string InsertSql = "INSERT INTO Cart (product_id, price) VALUES (@product_id, @price)";             using (var connection = new MySqlConnection(this.connectionString))             {                 connection.Execute(InsertSql, new { product_id = model.product_id, price = model.Price });                             }             return RedirectToAction("Index");         }     } }