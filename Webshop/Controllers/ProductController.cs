using System.Collections.Generic; using System.Data.SqlClient; using System.Linq; using Dapper; using Microsoft.AspNetCore.Mvc; using Microsoft.Extensions.Configuration; using MySql.Data.MySqlClient;
using Webshop.Models;   namespace Webshop.Controllers {     public class ProductController : Controller     {         private readonly string connectionString;          public ProductController(IConfiguration configuration)         {             this.connectionString = configuration.GetConnectionString("ConnectionString");         }          public ActionResult Index()         {             List<ProductViewModel> product;             using (var connection = new MySqlConnection(this.connectionString))             {                 product = connection.Query<ProductViewModel>("select * from Products").ToList();             }              return View(product);         }          //public ActionResult Get(string id)         //{         //    ProductViewModel newsItem;         //    using (var connection = new SqlConnection(this.connectionString))         //    {         //        newsItem = connection.QuerySingleOrDefault<ProductViewModel>("select * from Products where id = @id",         //            new { id });         //    }          //    if (newsItem == null)         //    {         //        return NotFound();         //    }          //    return View(newsItem);         //}          //[HttpGet]         //public ActionResult Create()         //{         //    return View();         //}          //[HttpPost]         //public ActionResult Create(ProductViewModel model)         //{         //    using (var connection = new SqlConnection(this.connectionString))         //    {         //        connection.Execute("insert into Products values(@id, @name, @price, @image)", new { model.Id, model.Name, model.Price, model.Image });         //    }          //    ViewBag.CreateMessage = "item has been added successfully.";          //    return View();         //}          //[HttpGet]         //public ActionResult Edit(int id)         //{         //    ProductViewModel newsItem;         //    using (var connection = new SqlConnection(this.connectionString))         //    {         //        newsItem = connection.QuerySingleOrDefault<ProductViewModel>("select * from News where id = @id",         //            new { id });         //    }          //    if (newsItem == null)         //    {         //        return NotFound();         //    }          //    return View(newsItem);         //}          //[HttpPost]         //public ActionResult Edit(ProductViewModel model)         //{         //    using (var connection = new SqlConnection(this.connectionString))         //    {         //        connection.ExecuteScalar("update News set Header = @header, Body = @body where id = @id",         //            new { model.Header, model.Body, model.Id });         //    }          //    ViewBag.UpdateMessage = "News item has been updated successfully.";          //    return View();          //}     } }